os:
- linux
# - osx
language: node_js
node_js: node
cache:
  directories:
  - $HOME/.cache/yarn
  - node_modules
sudo: false
matrix:
  fast_finish: true
before_install:
- curl -o- -L https://yarnpkg.com/install.sh | bash -s -- --version 0.21.3
- export PATH=$HOME/.yarn/bin:$PATH
install:
- travis_retry yarn global add phantomjs-prebuilt
- travis_retry yarn install
before_script:
- npm start test
script:
- npm start build
after_success:
- test $TRAVIS_PULL_REQUEST == "false" && test $TRAVIS_BRANCH == "master" && test $TRAVIS_OS_NAME == "linux" && bash deploy.sh
- bash yarn.sh
- bash <(curl -s https://codecov.io/bash)
addons:
  code_climate:
    repo_token: d4e9d96b88184c8841c0f11761fe17e51e4f2ee53e07b5204f7049a7f286bd61
